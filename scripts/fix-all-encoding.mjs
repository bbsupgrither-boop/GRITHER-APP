import { promises as fs } from 'fs';
import { glob } from 'glob';

// лАл╗лЙл▓л░ЛђЛї лил░л╝лхлй л║Лђл░л║лЙлиЛЈл▒Лђ лйл░ л┐Лђл░л▓лИл╗ЛїлйЛІлх ЛђЛЃЛЂЛЂл║лИлх ЛЂл╗лЙл▓л░
const replacements = {
  // лъЛЂлйлЙл▓лйЛІлх ЛЂл╗лЙл▓л░
  'ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░ла лњ ла л▓лѓ┬д ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░ла лњ ла л▓лѓ┬дла лњ лалјл▓лѓЛъла лњ ла л▓лѓ ': 'лўл▓л░лй лўл▓л░лйлЙл▓лИЛЄ',
  'ла лњ лалјлАЛЎла лњ лалјл▓лѓЛъла лњ ла л▓лѓ ла лњ лалјл▓лѓла лалІлалєлаРђџлалІла лњ лалјл▓лѓЛъла лњ лалјл▓лѓЛю': 'лЮлЙл▓лИЛЄлЙл║',
  'ла лњ лалєлаРђџлАЛџла лњ лалјл▓лѓЛъла лалІла лА"ла лалІлалєлаРђџлАРёбла лњ лалјл▓лѓла лњ лалјл▓лѓ"ла лњ ла л▓лѓ┬дла лњ лалјл▓лѓла лалІлалєлаРђџлАРёбла лњ ла'лњ┬х 2 ла лалІлалјл▓лѓЛџла лалІла л▓лѓЛЎла лњ лалјл▓лѓЛъла лњ ла л▓лѓ ла лњ ла л▓лѓ┬дла лалІла лалЈ': 'лћлЙЛЂЛѓлИЛЄЛї 2 ЛЃЛђлЙл▓лйЛЈ',
  'ла лњ лалјлАРђ║ла лалІла л▓лѓЛЎла лалІлалјл▓лѓЛџла лњ лаЛъл▓лѓла лњ лалјл▓лѓЛъла лњ ла'лњ┬╗ла лалІла л▓лѓРёќла лњ ла'лњла лњ лалјл▓лѓла лњ ла л▓лѓ ла лалІлалєлаРђџл▓РђъРђЊла лњ лалєл▓лѓЛЏл▓лѓ"': 'лњЛІл┐лЙл╗лйлИЛѓлхл╗Лї',
  'ла лњ лалєлаРђџл▓РђъЛъла лалІлалєлаРђџл▓РђъРђЊла лњ лалјл▓лѓ"ла лњ лалјл▓лѓЛъла лњ ла'лњ┬╗ла лњ ла л▓лѓ┬дла лњ лалјл▓лѓла лалІлалєлаРђџлАРёбла лњ ла'лњ┬х 10 ла лњ ла'лњ┬ила лњ ла'лњ┬░ла лњ лаЛъл▓лѓла лњ ла'лњ┬░ла лалІлалєлаРђџлалІ': 'лњЛІл┐лЙл╗лйлИЛѓЛї 10 лил░л┤л░лйлИл╣',
  'ла лњ лалјл▓РђъЛъла лњ лалјл▓лѓЛъла лњ ла'лњла лњ ла'лњ┬╗ла лњ ла'лњ┬хла лњ лалјл▓лѓЛюла лалІлалєлаРђџлњ ла лњ лалјл▓лѓла лњ лалјл▓лѓЛъла лњ ла л▓лѓ ла лњ ла'лњ┬хла лалІла л▓лѓЛЎ': 'лБл┤л░ЛЄл╗лИл▓ЛІл╣',
  'ла лњ лалјл▓лѓЛћла лалІлалєлаРђџлАРёбла лњ лалјл▓лѓЛюла лалІла л▓лѓЛЎла лњ лалјл▓лѓЛъла лњ лалєл▓лѓЛЏл▓лѓ"ла лалІлалєлаРђџлАРёбла лњ ла'лњ┬х 5 ла лњ лалјл▓лѓЛюла лњ ла'лњ┬хла лњ лалєл▓лѓЛЏл▓лѓ"ла лалІла лА"ла лњ лалјл▓лѓЛъла лњ ла л▓лѓ ': 'лъЛѓл║ЛђЛІЛѓЛї 5 л║лхл╣ЛЂлЙл▓',
  'ла лњ ла'лњла лаРђала л▓лѓЛЎлалјлАРђ║ла лњ ла'лњла л▓лѓРёбла'лњ┬╗ла лњ ла'лњла л▓лѓРёбла'лњ┬хла лњ ла'лњла лњ лалєлаРђџлњ┬дла лњ ла'лњла л▓лѓРёбла'лњ┬░ ла лњ ла'лњла лалІлалјл▓РђъЛъла лњ ла'лњла лалІлалєлаРђџлАЛЏла лњ ла лаРђ╣ла лњ лалєлаРђџлАРёбла лњ ла'лњла лалІлалєлаРђџлАЛЏла лњ ла'лњла л▓лѓРёбла'лњ┬ила лњ ла'лњла лалІлалєлаРђџлАЛЏла лњ ла'лњла лњ лалєлаРђџлњ ла лњ ла'лњла л▓лѓРёбла'лњ┬░': 'лљл╗лхл║ЛЂл░лйл┤Лђ лЪлхЛѓЛђлЙл▓лИЛЄ',
  'ла лњ ла'лњла лалІлалјл▓РђъЛъла лњ ла'лњла л▓лѓРёбла'лњ┬░ла лњ ла лаРђ╣ла лњ лалєлаРђџлАРёбла лњ ла'лњла лалІлалєлаРђџлњ┬дла лњ ла лаРђ╣ла лњ ла лалЈ ла лњ ла'лњла лњ ла л▓лѓРёќла лњ ла'лњла лалІлалєлаРђџлњ┬дла лњ ла'лњла лАЛЏлалєлаРђџлњ┬дла лњ ла'лњла лалІлалєлаРђџлАЛЏла лњ ла лаРђ╣ла лњ лалєлаРђџлАРёбла лњ ла'лњла лалІлалєлаРђџлАЛЏла лњ ла'лњла лњ лалєлаРђџлњ ла лњ ла'лњла л▓лѓРёбла'лњ┬░': 'люл░ЛђлИЛЈ лАлхЛђл│лхлхл▓лйл░',
  'ла лњ ла'лњла лалІлалєлаРђџл▓РђъЛъла лњ ла'лњла лњ лалєлаРђџлњ┬дла лњ ла'лњла лњ лалєлаРђџлњ┬дла лњ ла'лњла л▓лѓРёбла'лњ┬░ ла лњ ла'лњла л▓лѓРёбла'лњла лњ лалєлаРђџлњ ла лњ ла'лњла л▓лѓРёбла'лњ┬░ла лњ ла'лњла лњ лалєлаРђџлњ┬дла лњ ла'лњла лалІлалєлаРђџлАЛЏла лњ ла'лњла лњ лалєлаРђџлњ ла лњ ла'лњла л▓лѓРёбла'лњ┬░': 'лћл╝лИЛѓЛђлИл╣ лЮлИл║лЙл╗л░лхл▓лИЛЄ',
  'ла лњ ла'лњла лалІлалјлАЛЪла лњ ла'лњла л▓лѓРёбла'лњ┬хла лњ ла лаРђ╣ла лаРђала л▓лѓЛЎлалјл▓РђъЛъла лњ ла лаРђ╣ла лњ лалєлаРђџлАРёб ла лњ ла'лњла лалІлалјлАЛЪла лњ ла'лњла л▓лѓРёбла'лњ┬хла лњ ла лаРђ╣ла лаРђала л▓лѓЛЎлалјл▓РђъЛъла лњ ла лаРђ╣ла лњ лалєлаРђџлАРёбла лњ ла'лњла лалІлалєлаРђџлАЛЏла лњ ла'лњла лњ лалєлаРђџлњ ': 'лљл╗лхл║ЛЂл░лйл┤Лђ лљл╗лхл║ЛЂл░лйл┤ЛђлЙл▓лИЛЄ',
  'ла лњ лалєлаРђџл▓РђъЛъла лалІлалєлаРђџл▓РђъРђЊла лњ лалјл▓лѓ"ла лњ лалјл▓лѓЛъла лњ ла'лњ┬╗ла лњ ла л▓лѓ┬дла лњ лалјл▓лѓла лалІлалєлаРђџлАРёбла лалІла лаРђ░ ла лњ ла'лњ┬ила лњ ла'лњ┬░ла лњ лаЛъл▓лѓла лњ ла'лњ┬░ла лалІлалєлаРђџлалІла лалІлалјл▓лѓЛџ': 'лњЛІл┐лЙл╗лйлИЛѓЛї лил░л┤л░лйлИлх',
  'ла лњ лалјл▓лѓЛћла лњ лалјл▓лѓ"ла лњ лалјл▓лѓла лалІла лА"ла лњ ла'лњ┬░ла лњ ла л▓лѓ┬дла лњ лалјл▓лѓла лњ ла'лњ┬х ла лњ ла'лњ┬ила лњ ла'лњ┬░ла лњ лаЛъл▓лѓла лњ ла'лњ┬░ла лалІлалєлаРђџлалІла лњ лалјл▓лѓла': 'лАл┤лхл╗л░ЛѓЛї лил░л┤л░лйлИлх',
  'ла лњ ла'лњла лалІлалєл▓лѓЛЏлАЛЏла лњ ла'лњла л▓лѓРёбла'лњ┬хла лњ ла'лњла лаРђалалєлаРђџлАРђ║лалєлаРђџл▓лѓЛџ': 'лџлхл╣ЛЂ',
  'ла лњ ла'лњла лњ ла л▓лѓРёќла лњ ла'лњла л▓лѓРёбла'лњ┬╗ла лњ ла лаРђ╣ла лалІлалєлаРђџлАЛЎла лњ ла лаРђ╣ла лаРђала л▓лѓЛЎла лаРђ╣ла лњ ла'лњла л▓лѓРёбла'лњ┬░ла лњ ла'лњла лаРђалалєлаРђџлАРђ║лалєлаРђџл▓лѓЛџла лњ ла'лњла лњ лалєлаРђџлњ┬дла лњ ла лаРђ╣ла лаРђала л▓лѓЛЎлалєл▓лѓЛЏл▓лѓ"ла лњ ла'лњла лаРђалалєлаРђџлАРђ║лалєлаРђџл▓лѓЛџ ла лњ ла'лњла лалІлалєлаРђџл▓лѓЛюла лњ ла лаРђ╣ла лњ лалєлаРђџлАРёбла лњ ла'лњла л▓лѓРёбла'лњ┬хла лњ ла'лњла лАЛЏлалєлаРђџлњ┬дла лњ ла'лњла лалІла'лњла лњ ла'лњла л▓лѓРёбла'лњ┬хла лњ ла лаРђ╣ла лаРђала л▓лѓЛЎлалјл▓РђъЛъ': 'лАл╗ЛЃЛЄл░л╣лйЛІл╣ л║лхл╣ЛЂ ЛЂ лйл░л│Лђл░л┤л░л╝лИ',
  'ла лњ лалјлАЛЎла лњ лалјл▓лѓЛъла лњ ла л▓лѓ ла лњ лалјл▓лѓЛъла лњ ла'лњ┬х': 'лЮлЙл▓лЙлх л┤лЙЛЂЛѓлИлХлхлйлИлх',
  'ла лњ ла лалЃ ла лњ ла л▓лѓ ла лњ ла'лњ┬░ла лалІла лА" ла лњ ла л▓лѓ┬дла лњ лалјл▓лѓЛъла лњ ла л▓лѓ ла лњ лалјл▓лѓЛъла лњ ла'лњ┬х ла лалІла лА"ла лњ лалјл▓лѓЛъла лњ лалјл▓лѓЛъла лњ ла'лњла лалІлалєлаРђџлњ┬░ла лњ ла'лњ┬хла лњ ла л▓лѓ┬дла лњ лалјл▓лѓла лњ ла'лњ┬х': 'лњЛІ л┐лЙл╗ЛЃЛЄлИл╗лИ лйлЙл▓лЙлх л┤лЙЛЂЛѓлИлХлхлйлИлх',
  
  // лГл╝лЙл┤лилИ
  'лалјлаРђџлалјлАЛЪла лаРђ░лалјлАЛЪ': '­Ъј»',
  'ла лаРђалалјлАЛЎла'лњ┬цла лАРђћлалјл▓лѓла лалЈ': '­ЪЊЮ',
  'лалјлаРђџлалјлАЛЪлалєлаРђџлАЛЎла'лњ┬д': '­ЪјЂ',
  
  // лџлЙл╝л░лйл┤ЛІ лИ л║лЙл╝л░лйл┤ЛІ
  'ла лњ ла'лњла лаРђала л▓лѓЛЎлалєл▓лѓЛЏлАЛЏла лњ ла лаРђ╣ла лњ лалјл▓лѓЛџла лњ ла'лњла л▓лѓРёбла'лњ┬х ла лњ ла'лњла лалІлалєлаРђџлАЛџла лњ ла'лњла лалІлалєлаРђџлАЛЏла лњ ла'лњла лалІла'лњла лњ ла'лњла л▓лѓРёбла'лњ┬░ла лњ ла'лњла лњ лалєлаРђџлњ┬дла лњ ла'лњла лАЛЏлалєлаРђџлњ┬дла лњ ла лаРђ╣ла лаРђала л▓лѓЛЎлалєл▓лѓЛЏл▓лѓ"': 'лљл║ЛѓлИл▓л░ЛєлИЛЈ л║лЙл╝л░лйл┤ЛІ',
  'ла лњ ла'лњла лњ ла л▓лѓРёќла лњ ла'лњла л▓лѓРёбла'лњ┬░ла лњ ла'лњла лалІлалєлаРђџл▓лѓЛюла лњ ла'лњла лалІлалєлаРђџл▓лѓЛюла лњ ла'лњла лалІлалєлаРђџлАЛЏла лњ ла лаРђ╣ла лњ лалєлаРђџлАРёбла лњ ла лаРђ╣ла лаРђала л▓лѓЛЎлалјл▓РђъЛъ': 'лњЛІл▒Лђл░ЛѓЛї л║лЙл╝л░лйл┤ЛЃ',
  'ла лњ ла'лњла л▓лѓРёбла'лњла лњ ла лаРђ╣ла лалІлалєлаРђџлАЛЎла лњ ла'лњла лалІлалєлаРђџлАЛџла лњ ла'лњла лалІлалєлаРђџлАЛЏла лњ ла'лњла лњ лалєлаРђџлњ ла лњ ла'лњла лалІлалєлаРђџлАЛЏла лњ ла'лњла лАЛЏлалєлаРђџлњ┬дла лњ ла лаРђ╣ла лњ лалјл▓лѓЛџла лњ ла лаРђ╣ла лаРђала л▓лѓЛЎлалјл▓РђъЛъла лњ ла'лњла лњ лалєлаРђџлњ ла лњ ла'лњла лалІлалєлаРђџлАЛЏ': 'лћлЙл┐лЙл╗лйлИЛѓлхл╗Лїлйл░ЛЈ л║лЙл╝л░лйл┤л░',
  
  // лАлИЛЂЛѓлхл╝лйЛІлх ЛЂлЙлЙл▒ЛЅлхлйлИЛЈ
  'ла лњ ла'лњла лалІлалєлаРђџлА"ла лњ ла лаРђ╣ла лаРђалалєлаРђџлАРёбла'лњ┬гла лњ ла'лњла лалІлалєлаРђџлњ┬дла лњ ла'лњла л▓лѓРёбла'лњ┬▒ла лњ ла'лњла лалІлалєлаРђџлАЛџла лњ ла'лњла л▓лѓРёбла'лњ┬░ ла лњ ла'лњла лалІлалєлаРђџл▓лѓЛюла лњ ла'лњла лалІлалєлаРђџлАЛЏла лњ ла'лњла л▓лѓРёбла'лњ┬╗ла лњ ла лаРђ╣ла лалІлалєлаРђџлАЛЎла лњ ла лаРђ╣ла лаРђала л▓лѓЛЎла лаРђ╣ла лњ ла'лњла л▓лѓРёбла'лњ┬хла лњ ла'лњла лњ лалєлаРђџлњ┬дла лњ ла'лњла лалІлалєлаРђџлњ┬дла лњ ла лаРђ╣ла лњ ла лалЈ ла лњ ла'лњла л▓лѓРёбла'лњ┬░ла лњ ла'лњла лњ лалєлаРђџлњ ла лњ ла'лњла л▓лѓРёбла'лњ┬░ла лњ ла лаРђ╣ла лаРђала л▓лѓЛЎлалјл▓РђъЛъла лњ ла'лњла л▓лѓРёбла'лњ┬░ла лњ ла лаРђ╣ла лњ лалєлаРђџлАРёбла лњ ла'лњла лалІлалєлаРђџлАЛџла лњ ла'лњла лалІлалєлаРђџлњ┬д': 'лъЛѕлИл▒л║л░ л┐ЛђлИ ЛЂлЙЛЁЛђл░лйлхлйлИлИ л┐лЙл╗ЛїлилЙл▓л░Лѓлхл╗ЛЈ',
  'ла лалІла л▓лѓЛЎла лалІлалјлАЛЪла лаРђала л▓лѓЛЎлалјлАЛЎла лњ ла лаРђ░ ла лњ ла'лњла лалІлалјлАЛЪла лњ ла'лњла лалІлалєлаРђџлАЛЏла лњ ла'лњла л▓лѓРёбла'лњ┬╗ла лњ ла лаРђ╣ла лалІлалєлаРђџлАЛЎла лњ ла лаРђ╣ла лаРђала л▓лѓЛЎла лаРђ╣ла лњ ла'лњла л▓лѓРёбла'лњ┬хла лњ ла'лњла лњ лалєлаРђџлњ┬дла лњ ла'лњла л▓лѓРёбла'лњ┬░ ла лњ ла'лњла л▓лѓРёбла'лњ┬░ла лњ ла'лњла лњ лалєлаРђџлњ ла лњ ла'лњла л▓лѓРёбла'лњ┬░ла лњ ла лаРђ╣ла лаРђала л▓лѓЛЎлалјл▓РђъЛъла лњ ла'лњла л▓лѓРёбла'лњ┬░ла лњ ла лаРђ╣ла лњ лалєлаРђџлАРёбла лњ ла'лњла лалІлалєлаРђџлАЛџла лњ ла'лњла л▓лѓРёбла'лњ┬░ ла лњ ла'лњла лАЛЏлалєлаРђџлњ┬дла лњ ла'лњла л▓лѓРёбла'лњ┬╗ла лњ ла лаРђ╣ла лњ ла лалЈ Telegram ID': 'лъл▒лйлЙл▓л╗лхлй л┐лЙл╗ЛїлилЙл▓л░Лѓлхл╗Лї Telegram ID'
};

async function fixFile(filePath) {
  try {
    const content = await fs.readFile(filePath, 'utf8');
    let fixed = content;
    let hasChanges = false;
    
    // лЪЛђлИл╝лхлйЛЈлхл╝ л▓ЛЂлх лил░л╝лхлйЛІ
    for (const [broken, correct] of Object.entries(replacements)) {
      if (fixed.includes(broken)) {
        fixed = fixed.replaceAll(broken, correct);
        hasChanges = true;
      }
    }
    
    // лБл┤л░л╗ЛЈлхл╝ лИЛЂл┐лЙЛђЛЄлхлйлйЛІлх лИл╝л┐лЙЛђЛѓЛІ
    if (fixed.includes('ла лАРђћла'лњ┬╗лалјл▓лѓ"import')) {
      fixed = fixed.replace('ла лАРђћла'лњ┬╗лалјл▓лѓ"import', 'import');
      hasChanges = true;
    }
    
    if (hasChanges) {
      await fs.writeFile(filePath, fixed, 'utf8');
      console.log(`РюЁ Fixed: ${filePath}`);
      return true;
    }
    return false;
  } catch (error) {
    console.error(`РЮї Error fixing ${filePath}:`, error.message);
    return false;
  }
}

async function main() {
  console.log('­ЪћД Starting encoding fix...');
  
  const files = await glob('frontend/**/*.{ts,tsx,js,jsx}', { nodir: true });
  let fixedCount = 0;
  
  console.log(`­ЪЊЂ Found ${files.length} files to check`);
  
  for (const file of files) {
    if (await fixFile(file)) {
      fixedCount++;
    }
  }
  
  console.log(`\n­ЪјЅ Total files fixed: ${fixedCount}`);
  
  if (fixedCount === 0) {
    console.log('Рё╣№ИЈ  No files needed fixing');
  }
}

main().catch(console.error);
