import { promises as fs } from 'fs';
import { glob } from 'glob';

// лал░ЛЂЛѕлИЛђлхлйлйЛІл╣ ЛЂл┐лИЛЂлЙл║ л║Лђл░л║лЙлиЛЈл▒Лђ лИ лИЛЁ л┐Лђл░л▓лИл╗ЛїлйЛІЛЁ л┐лхЛђлхл▓лЙл┤лЙл▓
const fixes = {
  'ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░ла лњ ла л▓лѓ┬д ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░ла лњ ла л▓лѓ┬дла лњ лалјл▓лѓЛъла лњ ла л▓лѓ ': 'лўл▓л░лй лўл▓л░лйлЙл▓лИЛЄ',
  'ла лњ лалјлАЛЎла лњ лалјл▓лѓЛъла лњ ла л▓лѓ ла лњ лалјл▓лѓла лалІлалєлаРђџлалІла лњ лалјл▓лѓЛъла лњ лалјл▓лѓЛю': 'лЮлЙл▓лИЛЄлЙл║',
  'ла лњ лалєлаРђџлАЛџла лњ лалјл▓лѓЛъла лалІла лА"ла лалІлалєлаРђџлАРёбла лњ лалјл▓лѓла лњ лалјл▓лѓ"ла лњ ла л▓лѓ┬дла лњ лалјл▓лѓла лалІлалєлаРђџлАРёбла лњ ла'лњ┬х 2 ла лалІлалјл▓лѓЛџла лалІла л▓лѓЛЎла лњ лалјл▓лѓЛъла лњ ла л▓лѓ ла лњ ла л▓лѓ┬дла лалІла лалЈ': 'лћлЙЛЂЛѓлИЛЄЛї 2 ЛЃЛђлЙл▓лйЛЈ',
  'лалјлаРђџлалјлАЛЪла лаРђ░лалјлАЛЪ': '­Ъј»',
  'ла лњ лалјлАРђ║ла лалІла л▓лѓЛЎла лалІлалјл▓лѓЛџла лњ лаЛъл▓лѓла лњ лалјл▓лѓЛъла лњ ла'лњ┬╗ла лалІла л▓лѓРёќла лњ ла'лњла лњ лалјл▓лѓла лњ ла л▓лѓ ла лалІлалєлаРђџл▓РђъРђЊла лњ лалєл▓лѓЛЏл▓лѓ"': 'лњЛІл┐лЙл╗лйлИЛѓлхл╗Лї',
  'ла лњ лалєлаРђџл▓РђъЛъла лалІлалєлаРђџл▓РђъРђЊла лњ лалјл▓лѓ"ла лњ лалјл▓лѓЛъла лњ ла'лњ┬╗ла лњ ла л▓лѓ┬дла лњ лалјл▓лѓла лалІлалєлаРђџлАРёбла лњ ла'лњ┬х 10 ла лњ ла'лњ┬ила лњ ла'лњ┬░ла лњ лаЛъл▓лѓла лњ ла'лњ┬░ла лалІлалєлаРђџлалІ': 'лњЛІл┐лЙл╗лйлИЛѓЛї 10 лил░л┤л░лйлИл╣',
  'ла лаРђалалјлАЛЎла'лњ┬цла лАРђћлалјл▓лѓла лалЈ': '­ЪЊЮ',
  'ла лњ лалјл▓РђъЛъла лњ лалјл▓лѓЛъла лњ ла'лњла лњ ла'лњ┬╗ла лњ ла'лњ┬хла лњ лалјл▓лѓЛюла лалІлалєлаРђџлњ ла лњ лалјл▓лѓла лњ лалјл▓лѓЛъла лњ ла л▓лѓ ла лњ ла'лњ┬хла лалІла л▓лѓЛЎ': 'лБл┤л░ЛЄл╗лИл▓ЛІл╣',
  'ла лњ лалјл▓лѓЛћла лалІлалєлаРђџлАРёбла лњ лалјл▓лѓЛюла лалІла л▓лѓЛЎла лњ лалјл▓лѓЛъла лњ лалєл▓лѓЛЏл▓лѓ"ла лалІлалєлаРђџлАРёбла лњ ла'лњ┬х 5 ла лњ лалјл▓лѓЛюла лњ ла'лњ┬хла лњ лалєл▓лѓЛЏл▓лѓ"ла лалІла лА"ла лњ лалјл▓лѓЛъла лњ ла л▓лѓ ': 'лъЛѓл║ЛђЛІЛѓЛї 5 л║лхл╣ЛЂлЙл▓',
  'лалјлаРђџлалјлАЛЪлалєлаРђџлАЛЎла'лњ┬д': '­ЪјЂ',
  'ла лњ ла'лњла лаРђала л▓лѓЛЎлалјлАРђ║ла лњ ла'лњла л▓лѓРёбла'лњ┬╗ла лњ ла'лњла л▓лѓРёбла'лњ┬хла лњ ла'лњла лњ лалєлаРђџлњ┬дла лњ ла'лњла л▓лѓРёбла'лњ┬░ ла лњ ла'лњла лалІлалјл▓РђъЛъла лњ ла'лњла лалІлалєлаРђџлАЛЏла лњ ла лаРђ╣ла лњ лалєлаРђџлАРёбла лњ ла'лњла лалІлалєлаРђџлАЛЏла лњ ла'лњла л▓лѓРёбла'лњ┬ила лњ ла'лњла лалІлалєлаРђџлАЛЏла лњ ла'лњла лњ лалєлаРђџлњ ла лњ ла'лњла л▓лѓРёбла'лњ┬░': 'лљл╗лхл║ЛЂл░лйл┤Лђ лЪлхЛѓЛђлЙл▓лИЛЄ',
  'ла лњ ла'лњла лалІлалјл▓РђъЛъла лњ ла'лњла л▓лѓРёбла'лњ┬░ла лњ ла лаРђ╣ла лњ лалєлаРђџлАРёбла лњ ла'лњла лалІлалєлаРђџлњ┬дла лњ ла лаРђ╣ла лњ ла лалЈ ла лњ ла'лњла лњ ла л▓лѓРёќла лњ ла'лњла лалІлалєлаРђџлњ┬дла лњ ла'лњла лАЛЏлалєлаРђџлњ┬дла лњ ла'лњла лалІлалєлаРђџлАЛЏла лњ ла лаРђ╣ла лњ лалєлаРђџлАРёбла лњ ла'лњла лалІлалєлаРђџлАЛЏла лњ ла'лњла лњ лалєлаРђџлњ ла лњ ла'лњла л▓лѓРёбла'лњ┬░': 'люл░ЛђлИЛЈ лАлхЛђл│лхлхл▓лйл░',
  'ла лњ ла'лњла лалІлалєлаРђџл▓РђъЛъла лњ ла'лњла лњ лалєлаРђџлњ┬дла лњ ла'лњла лњ лалєлаРђџлњ┬дла лњ ла'лњла л▓лѓРёбла'лњ┬░ ла лњ ла'лњла л▓лѓРёбла'лњла лњ лалєлаРђџлњ ла лњ ла'лњла л▓лѓРёбла'лњ┬░ла лњ ла'лњла лњ лалєлаРђџлњ┬дла лњ ла'лњла лалІлалєлаРђџлАЛЏла лњ ла'лњла лњ лалєлаРђџлњ ла лњ ла'лњла л▓лѓРёбла'лњ┬░': 'лћл╝лИЛѓЛђлИл╣ лЮлИл║лЙл╗л░лхл▓лИЛЄ',
  'ла лњ ла'лњла лалІлалјлАЛЪла лњ ла'лњла л▓лѓРёбла'лњ┬хла лњ ла лаРђ╣ла лаРђала л▓лѓЛЎлалјл▓РђъЛъла лњ ла лаРђ╣ла лњ лалєлаРђџлАРёб ла лњ ла'лњла лалІлалјлАЛЪла лњ ла'лњла л▓лѓРёбла'лњ┬хла лњ ла лаРђ╣ла лаРђала л▓лѓЛЎлалјл▓РђъЛъла лњ ла лаРђ╣ла лњ лалєлаРђџлАРёбла лњ ла'лњла лалІлалєлаРђџлАЛЏла лњ ла'лњла лњ лалєлаРђџлњ ': 'лљл╗лхл║ЛЂл░лйл┤Лђ лљл╗лхл║ЛЂл░лйл┤ЛђлЙл▓лИЛЄ',
  'ла лњ лалєлаРђџл▓РђъЛъла лалІлалєлаРђџл▓РђъРђЊла лњ лалјл▓лѓ"ла лњ лалјл▓лѓЛъла лњ ла'лњ┬╗ла лњ ла л▓лѓ┬дла лњ лалјл▓лѓла лалІлалєлаРђџлАРёбла лалІла лаРђ░ ла лњ ла'лњ┬ила лњ ла'лњ┬░ла лњ лаЛъл▓лѓла лњ ла'лњ┬░ла лалІлалєлаРђџлалІла лалІлалјл▓лѓЛџ': 'лњЛІл┐лЙл╗лйлИЛѓЛї лил░л┤л░лйлИлх',
  'ла лњ лалјл▓лѓЛћла лњ лалјл▓лѓ"ла лњ лалјл▓лѓла лалІла лА"ла лњ ла'лњ┬░ла лњ ла л▓лѓ┬дла лњ лалјл▓лѓла лњ ла'лњ┬х ла лњ ла'лњ┬ила лњ ла'лњ┬░ла лњ лаЛъл▓лѓла лњ ла'лњ┬░ла лалІлалєлаРђџлалІла лњ лалјл▓лѓла': 'лАл┤лхл╗л░ЛѓЛї лил░л┤л░лйлИлх',
  'ла лњ ла'лњла лалІлалєл▓лѓЛЏлАЛЏла лњ ла'лњла л▓лѓРёбла'лњ┬хла лњ ла'лњла лаРђалалєлаРђџлАРђ║лалєлаРђџл▓лѓЛџ': 'лџлхл╣ЛЂ',
  'ла лњ ла'лњла лњ ла л▓лѓРёќла лњ ла'лњла л▓лѓРёбла'лњ┬╗ла лњ ла лаРђ╣ла лалІлалєлаРђџлАЛЎла лњ ла лаРђ╣ла лаРђала л▓лѓЛЎла лаРђ╣ла лњ ла'лњла л▓лѓРёбла'лњ┬░ла лњ ла'лњла лаРђалалєлаРђџлАРђ║лалєлаРђџл▓лѓЛџла лњ ла'лњла лњ лалєлаРђџлњ┬дла лњ ла лаРђ╣ла лаРђала л▓лѓЛЎлалєл▓лѓЛЏл▓лѓ"ла лњ ла'лњла лаРђалалєлаРђџлАРђ║лалєлаРђџл▓лѓЛџ ла лњ ла'лњла лалІлалєлаРђџл▓лѓЛюла лњ ла лаРђ╣ла лњ лалєлаРђџлАРёбла лњ ла'лњла л▓лѓРёбла'лњ┬хла лњ ла'лњла лАЛЏлалєлаРђџлњ┬дла лњ ла'лњла лалІла'лњла лњ ла'лњла л▓лѓРёбла'лњ┬хла лњ ла лаРђ╣ла лаРђала л▓лѓЛЎлалјл▓РђъЛъ': 'лАл╗ЛЃЛЄл░л╣лйЛІл╣ л║лхл╣ЛЂ ЛЂ лйл░л│Лђл░л┤л░л╝лИ',
  'ла лњ лалјлАЛЎла лњ лалјл▓лѓЛъла лњ ла л▓лѓ ла лњ лалјл▓лѓЛъла лњ ла'лњ┬х': 'лЮлЙл▓лЙлх л┤лЙЛЂЛѓлИлХлхлйлИлх',
  'ла лњ ла лалЃ ла лњ ла л▓лѓ ла лњ ла'лњ┬░ла лалІла лА" ла лњ ла л▓лѓ┬дла лњ лалјл▓лѓЛъла лњ ла л▓лѓ ла лњ лалјл▓лѓЛъла лњ ла'лњ┬х ла лалІла лА"ла лњ лалјл▓лѓЛъла лњ лалјл▓лѓЛъла лњ ла'лњла лалІлалєлаРђџлњ┬░ла лњ ла'лњ┬хла лњ ла л▓лѓ┬дла лњ лалјл▓лѓла лњ ла'лњ┬х': 'лњЛІ л┐лЙл╗ЛЃЛЄлИл╗лИ лйлЙл▓лЙлх л┤лЙЛЂЛѓлИлХлхлйлИлх'
};

async function fixFile(filePath) {
  try {
    const content = await fs.readFile(filePath, 'utf8');
    let fixed = content;
    let hasChanges = false;
    
    // лЪЛђлИл╝лхлйЛЈлхл╝ л▓ЛЂлх лИЛЂл┐Лђл░л▓л╗лхлйлИЛЈ
    for (const [broken, correct] of Object.entries(fixes)) {
      if (fixed.includes(broken)) {
        fixed = fixed.replaceAll(broken, correct);
        hasChanges = true;
      }
    }
    
    // лъл▒ЛЅлИлх л┐л░ЛѓЛѓлхЛђлйЛІ л║Лђл░л║лЙлиЛЈл▒Лђ
    const patterns = [
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лљ'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лЉ'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лњ'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лЊ'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лћ'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лЋ'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лЂ'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лќ'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лЌ'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лў'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лЎ'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лџ'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лЏ'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лю'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лЮ'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лъ'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лЪ'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'ла'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лА'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лб'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лБ'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лц'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лЦ'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лд'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лД'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'ле'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лЕ'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лф'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лФ'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лг'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'лГ'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'л«'],
      [/ла лњ ла'лњла лњ ла л▓лѓ ла лњ ла'лњ┬░/g, 'л»']
    ];
    
    for (const [pattern, replacement] of patterns) {
      if (pattern.test(fixed)) {
        fixed = fixed.replace(pattern, replacement);
        hasChanges = true;
      }
    }
    
    if (hasChanges) {
      await fs.writeFile(filePath, fixed, 'utf8');
      console.log(`Fixed: ${filePath}`);
      return true;
    }
    return false;
  } catch (error) {
    console.error(`Error fixing ${filePath}:`, error.message);
    return false;
  }
}

async function main() {
  const files = await glob('frontend/**/*.{ts,tsx,js,jsx}', { nodir: true });
  let fixedCount = 0;
  
  for (const file of files) {
    if (await fixFile(file)) {
      fixedCount++;
    }
  }
  
  console.log(`Total files fixed: ${fixedCount}`);
}

main().catch(console.error);
