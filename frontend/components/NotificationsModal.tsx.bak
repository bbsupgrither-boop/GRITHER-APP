РїВ»С—import React from 'react';
import { Clock, User, FileText } from './Icons';
import { ModalOpaque } from './ModalOpaque';

interface Notification {
  id: string;
  type: 'battle_evidence' | 'task_submission' | 'user_report';
  title: string;
  message: string;
  time: string;
  from: string;
  isNew: boolean;
}

interface NotificationsModalProps {
  isOpen: boolean;
  onClose: () => void;
  theme?: 'light' | 'dark';
}

export function NotificationsModal({ isOpen, onClose, theme = 'light' }: NotificationsModalProps) {
  const [notifications, setNotifications] = React.useState<Notification[]>([
    {
      id: '1',
      type: 'battle_evidence',
      title: 'Р СњР С•Р Р†РЎвЂ№Р Вµ Р Т‘Р С•Р С”Р В°Р В·Р В°РЎвЂљР ВµР В»РЎРЉРЎРѓРЎвЂљР Р†Р В° Р В±Р В°РЎвЂљРЎвЂљР В»Р В°',
      message: 'Р С’Р В»Р ВµР С”РЎРѓР ВµР в„– Р СџР ВµРЎвЂљРЎР‚Р С•Р Р† Р С•РЎвЂљР С—РЎР‚Р В°Р Р†Р С‘Р В» Р Т‘Р С•Р С”Р В°Р В·Р В°РЎвЂљР ВµР В»РЎРЉРЎРѓРЎвЂљР Р†Р В° Р Р†РЎвЂ№Р С—Р С•Р В»Р Р…Р ВµР Р…Р С‘РЎРЏ Р В±Р В°РЎвЂљРЎвЂљР В»Р В°',
      time: '2 Р В РЎВР В РЎвЂР В Р вЂ¦ Р В Р вЂ¦Р В Р’В°Р В Р’В·Р В Р’В°Р В РўвЂ',
      from: 'Р В РЎвЂ™Р В Р’В»Р В Р’ВµР В РЎвЂќР РЋР С“Р В Р’ВµР В РІвЂћвЂ“ Р В РЎСџР В Р’ВµР РЋРІР‚С™Р РЋР вЂљР В РЎвЂўР В Р вЂ ',
      isNew: true
    },
    {
      id: '2', 
      type: 'task_submission',
      title: 'Р В РІР‚вЂќР В Р’В°Р В РўвЂР В Р’В°Р РЋРІР‚РЋР В Р’В° Р В Р вЂ Р РЋРІР‚в„–Р В РЎвЂ”Р В РЎвЂўР В Р’В»Р В Р вЂ¦Р В Р’ВµР В Р вЂ¦Р В Р’В°',
      message: 'Р В РЎС™Р В Р’В°Р РЋР вЂљР В РЎвЂР РЋР РЏ Р В Р’ВР В Р вЂ Р В Р’В°Р В Р вЂ¦Р В РЎвЂўР В Р вЂ Р В Р’В° Р В РЎвЂўР РЋРІР‚С™Р В РЎВР В Р’ВµР РЋРІР‚С™Р В РЎвЂР В Р’В»Р В Р’В° Р В Р’В·Р В Р’В°Р В РўвЂР В Р’В°Р РЋРІР‚РЋР РЋРЎвЂњ Р В РЎвЂќР В Р’В°Р В РЎвЂќ Р В Р вЂ Р РЋРІР‚в„–Р В РЎвЂ”Р В РЎвЂўР В Р’В»Р В Р вЂ¦Р В Р’ВµР В Р вЂ¦Р В Р вЂ¦Р РЋРЎвЂњР РЋР вЂ№',
      time: '15 Р В РЎВР В РЎвЂР В Р вЂ¦ Р В Р вЂ¦Р В Р’В°Р В Р’В·Р В Р’В°Р В РўвЂ',
      from: 'Р В РЎС™Р В Р’В°Р РЋР вЂљР В РЎвЂР РЋР РЏ Р В Р’ВР В Р вЂ Р В Р’В°Р В Р вЂ¦Р В РЎвЂўР В Р вЂ Р В Р’В°',
      isNew: true
    },
    {
      id: '3',
      type: 'user_report',
      title: 'Р В Р Р‹Р В РЎвЂўР В РЎвЂўР В Р’В±Р РЋРІР‚В°Р В Р’ВµР В Р вЂ¦Р В РЎвЂР В Р’Вµ Р В РЎвЂў Р В РЎвЂ”Р РЋР вЂљР В РЎвЂўР В Р’В±Р В Р’В»Р В Р’ВµР В РЎВР В Р’Вµ',
      message: 'Р В Р Р‹Р В Р’ВµР РЋР вЂљР В РЎвЂ“Р В Р’ВµР В РІвЂћвЂ“ Р В Р Р‹Р В РЎвЂР В РўвЂР В РЎвЂўР РЋР вЂљР В РЎвЂўР В Р вЂ  Р РЋР С“Р В РЎвЂўР В РЎвЂўР В Р’В±Р РЋРІР‚В°Р В РЎвЂР В Р’В» Р В РЎвЂў Р РЋРІР‚С™Р В Р’ВµР РЋРІР‚В¦Р В Р вЂ¦Р В РЎвЂР РЋРІР‚РЋР В Р’ВµР РЋР С“Р В РЎвЂќР В РЎвЂўР В РІвЂћвЂ“ Р В РЎвЂ”Р РЋР вЂљР В РЎвЂўР В Р’В±Р В Р’В»Р В Р’ВµР В РЎВР В Р’Вµ',
      time: '1 Р РЋРІР‚РЋР В Р’В°Р РЋР С“ Р В Р вЂ¦Р В Р’В°Р В Р’В·Р В Р’В°Р В РўвЂ',
      from: 'Р В Р Р‹Р В Р’ВµР РЋР вЂљР В РЎвЂ“Р В Р’ВµР В РІвЂћвЂ“ Р В Р Р‹Р В РЎвЂР В РўвЂР В РЎвЂўР РЋР вЂљР В РЎвЂўР В Р вЂ ',
      isNew: false
    }
  ]);

  const handleMarkAllAsRead = () => {
    setNotifications([]);
  };

  const handleMarkAsRead = (notificationId: string) => {
    setNotifications(prev => prev.filter(notification => notification.id !== notificationId));
  };

  const getNotificationIcon = (type: string) => {
    switch (type) {
      case 'battle_evidence':
        return <FileText style={{ width: '16px', height: '16px', color: '#2B82FF' }} />;
      case 'task_submission':
        return <Clock style={{ width: '16px', height: '16px', color: '#34c759' }} />;
      case 'user_report':
        return <User style={{ width: '16px', height: '16px', color: '#ff9500' }} />;
      default:
        return <Clock style={{ width: '16px', height: '16px', color: theme === 'dark' ? '#A7B0BD' : '#6B7280' }} />;
    }
  };

  return (
    <ModalOpaque
      isOpen={isOpen}
      onClose={onClose}
      title="Р В Р в‚¬Р В Р вЂ Р В Р’ВµР В РўвЂР В РЎвЂўР В РЎВР В Р’В»Р В Р’ВµР В Р вЂ¦Р В РЎвЂР РЋР РЏ"
      theme={theme}
      actions={
        notifications.length > 0 ? (
          <button 
            onClick={handleMarkAllAsRead}
            className="w-full transition-colors text-center"
            style={{
              height: '44px',
              borderRadius: '12px',
              backgroundColor: 'transparent',
              color: '#2B82FF',
              border: 'none',
              fontSize: '14px'
            }}
          >
            Р В РЎвЂєР РЋРІР‚С™Р В РЎВР В Р’ВµР РЋРІР‚С™Р В РЎвЂР РЋРІР‚С™Р РЋР Р‰ Р В Р вЂ Р РЋР С“Р В Р’Вµ Р В РЎвЂќР В Р’В°Р В РЎвЂќ Р В РЎвЂ”Р РЋР вЂљР В РЎвЂўР РЋРІР‚РЋР В РЎвЂР РЋРІР‚С™Р В Р’В°Р В Р вЂ¦Р В Р вЂ¦Р РЋРІР‚в„–Р В Р’Вµ
          </button>
        ) : undefined
      }
    >
      <div style={{ maxHeight: '60vh', overflowY: 'auto' }}>
        {notifications.length > 0 ? (
          <div className="space-y-3">
            {notifications.map((notification) => (
              <div
                key={notification.id}
                className="p-4 rounded-xl transition-colors cursor-pointer"
                style={{
                  backgroundColor: notification.isNew 
                    ? theme === 'dark' ? 'rgba(43, 130, 255, 0.12)' : 'rgba(43, 130, 255, 0.10)'
                    : theme === 'dark' ? '#202734' : '#F3F5F8',
                  border: notification.isNew 
                    ? '1px solid rgba(43, 130, 255, 0.20)' 
                    : theme === 'dark' ? '1px solid rgba(255, 255, 255, 0.06)' : '1px solid #E6E9EF'
                }}
              >
                <div className="flex items-start gap-3">
                  <div style={{ marginTop: '4px' }}>
                    {getNotificationIcon(notification.type)}
                  </div>
                  <div className="flex-1 min-w-0">
                    <div className="flex items-center justify-between mb-1">
                      <h4 
                        className="font-medium"
                        style={{ 
                          fontSize: '14px',
                          color: notification.isNew 
                            ? theme === 'dark' ? '#E8ECF2' : '#0F172A'
                            : theme === 'dark' ? '#A7B0BD' : '#6B7280'
                        }}
                      >
                        {notification.title}
                      </h4>
                      <div className="flex items-center gap-2">
                        {notification.isNew && (
                          <div 
                            className="rounded-full flex-shrink-0"
                            style={{
                              width: '8px',
                              height: '8px',
                              backgroundColor: '#2B82FF'
                            }}
                          />
                        )}
                      </div>
                    </div>
                    <p 
                      className="mb-2"
                      style={{ 
                        fontSize: '12px',
                        color: theme === 'dark' ? '#A7B0BD' : '#6B7280'
                      }}
                    >
                      {notification.message}
                    </p>
                    <div className="flex items-center justify-between">
                      <span 
                        style={{ 
                          fontSize: '12px',
                          color: theme === 'dark' ? '#A7B0BD' : '#6B7280'
                        }}
                      >
                        Р В РЎвЂєР РЋРІР‚С™: {notification.from}
                      </span>
                      <span 
                        style={{ 
                          fontSize: '12px',
                          color: theme === 'dark' ? '#A7B0BD' : '#6B7280'
                        }}
                      >
                        {notification.time}
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            ))}
          </div>
        ) : (
          <div className="flex items-center justify-center" style={{ minHeight: '120px' }}>
            <div className="text-center">
              <Clock style={{ 
                width: '48px', 
                height: '48px', 
                color: theme === 'dark' ? 'rgba(167, 176, 189, 0.5)' : 'rgba(107, 114, 128, 0.5)',
                margin: '0 auto 16px'
              }} />
              <p style={{ 
                color: theme === 'dark' ? '#A7B0BD' : '#6B7280',
                fontSize: '14px'
              }}>
                Р В РЎСљР В Р’ВµР РЋРІР‚С™ Р В Р вЂ¦Р В РЎвЂўР В Р вЂ Р РЋРІР‚в„–Р РЋРІР‚В¦ Р РЋРЎвЂњР В Р вЂ Р В Р’ВµР В РўвЂР В РЎвЂўР В РЎВР В Р’В»Р В Р’ВµР В Р вЂ¦Р В РЎвЂР В РІвЂћвЂ“
              </p>
            </div>
          </div>
        )}
      </div>
    </ModalOpaque>
  );
}
