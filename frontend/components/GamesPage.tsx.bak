РїВ»С—import { useState } from 'react';
import { Gamepad2, Clock, Star, CircleDot, Scissors, DollarSign, Play, Users } from './Icons';
import { Header } from './Header';
import { BottomNavigation } from './BottomNavigation';
import { Dialog, DialogContent, DialogTitle, DialogDescription } from './ui/dialog';
import { Game } from '../types/games';

interface GamesPageProps {
  onNavigate: (page: string) => void;
  currentPage: string;
  onOpenSettings: () => void;
  profilePhoto?: string | null;
}

// Р В РЎС™Р В РЎвЂўР В РЎвЂќ-Р В РўвЂР В Р’В°Р В Р вЂ¦Р В Р вЂ¦Р РЋРІР‚в„–Р В Р’Вµ Р В РЎвЂўР В РЎвЂ”Р РЋРЎвЂњР В Р’В±Р В Р’В»Р В РЎвЂР В РЎвЂќР В РЎвЂўР В Р вЂ Р В Р’В°Р В Р вЂ¦Р В Р вЂ¦Р РЋРІР‚в„–Р РЋРІР‚В¦ Р В РЎвЂР В РЎвЂ“Р РЋР вЂљ
const publishedGames: Game[] = [
  {
    id: '1',
    name: 'Р В РЎв„ўР В РЎвЂўР В Р’В»Р В Р’ВµР РЋР С“Р В РЎвЂў Р РЋРЎвЂњР В РўвЂР В Р’В°Р РЋРІР‚РЋР В РЎвЂ',
    description: 'Р В РЎв„ўР РЋР вЂљР РЋРЎвЂњР РЋРІР‚С™Р В РЎвЂР РЋРІР‚С™Р В Р’Вµ Р В РЎвЂќР В РЎвЂўР В Р’В»Р В Р’ВµР РЋР С“Р В РЎвЂў Р В РЎвЂ Р В РЎвЂ”Р В РЎвЂўР В Р’В»Р РЋРЎвЂњР РЋРІР‚РЋР В Р’В°Р В РІвЂћвЂ“Р РЋРІР‚С™Р В Р’Вµ Р РЋР С“Р В Р’В»Р РЋРЎвЂњР РЋРІР‚РЋР В Р’В°Р В РІвЂћвЂ“Р В Р вЂ¦Р РЋРІР‚в„–Р В Р’Вµ Р В Р вЂ¦Р В Р’В°Р В РЎвЂ“Р РЋР вЂљР В Р’В°Р В РўвЂР РЋРІР‚в„– Р В РЎвЂќР В Р’В°Р В Р’В¶Р В РўвЂР РЋРІР‚в„–Р В Р’Вµ 5 Р В РЎВР В РЎвЂР В Р вЂ¦Р РЋРЎвЂњР РЋРІР‚С™',
    type: 'wheel',
    status: 'published',
    icon: 'РЎР‚РЎСџР вЂ№Р’В°',
    config: {
      sectors: [
        { label: '10 XP', weight: 40, rewardType: 'xp', rewardValue: 10 },
        { label: '50 Р В РЎВР В РЎвЂўР В Р вЂ¦Р В Р’ВµР РЋРІР‚С™', weight: 30, rewardType: 'currency', rewardValue: 50 },
        { label: '100 Р В РЎВР В РЎвЂўР В Р вЂ¦Р В Р’ВµР РЋРІР‚С™', weight: 20, rewardType: 'currency', rewardValue: 100 },
        { label: 'Р В РЎСџР РЋРЎвЂњР РЋР С“Р РЋРІР‚С™Р В РЎвЂў', weight: 10, rewardType: 'none', rewardValue: 0 }
      ],
      spinAnimationMs: 3000
    },
    rewards: [],
    access: {
      visibility: 'public',
      cooldownSeconds: 300
    },
    createdAt: '2024-01-01T00:00:00Z',
    updatedAt: '2024-01-01T00:00:00Z',
    publishedAt: '2024-01-01T00:00:00Z',
    stats: {
      totalPlays: 1254,
      totalRewards: 45680,
      uniquePlayers: 387
    }
  },
  {
    id: '2',
    name: 'Р В РІР‚ВР В РЎвЂР РЋРІР‚С™Р В Р вЂ Р В Р’В° Р В Р вЂ Р РЋРІР‚в„–Р В Р’В±Р В РЎвЂўР РЋР вЂљР В Р’В°',
    description: 'Р В РЎв„ўР В Р’В»Р В Р’В°Р РЋР С“Р РЋР С“Р В РЎвЂР РЋРІР‚РЋР В Р’ВµР РЋР С“Р В РЎвЂќР В Р’В°Р РЋР РЏ Р В РЎвЂР В РЎвЂ“Р РЋР вЂљР В Р’В° Р В РЎвЂќР В Р’В°Р В РЎВР В Р’ВµР В Р вЂ¦Р РЋР Р‰-Р В Р вЂ¦Р В РЎвЂўР В Р’В¶Р В Р вЂ¦Р В РЎвЂР РЋРІР‚В Р РЋРІР‚в„–-Р В Р’В±Р РЋРЎвЂњР В РЎВР В Р’В°Р В РЎвЂ“Р В Р’В° Р В РЎвЂ”Р РЋР вЂљР В РЎвЂўР РЋРІР‚С™Р В РЎвЂР В Р вЂ  Р РЋРЎвЂњР В РЎВР В Р вЂ¦Р В РЎвЂўР В РЎвЂ“Р В РЎвЂў Р В Р’В±Р В РЎвЂўР РЋРІР‚С™Р В Р’В°',
    type: 'rps',
    status: 'published',
    icon: 'Р Р†РЎС™РІР‚С™Р С—РЎвЂР РЏ',
    config: {
      mode: 'pve',
      rounds: 1,
      winReward: { type: 'currency', value: 25 },
      drawReward: { type: 'currency', value: 5 }
    },
    rewards: [],
    access: {
      visibility: 'public',
      cooldownSeconds: 180
    },
    createdAt: '2024-01-02T00:00:00Z',
    updatedAt: '2024-01-02T00:00:00Z',
    publishedAt: '2024-01-02T00:00:00Z',
    stats: {
      totalPlays: 892,
      totalRewards: 15430,
      uniquePlayers: 234
    }
  },
  {
    id: '3',
    name: 'Р В РІР‚вЂќР В РЎвЂўР В Р’В»Р В РЎвЂўР РЋРІР‚С™Р РЋРІР‚в„–Р В Р’Вµ Р РЋР С“Р В Р’В»Р В РЎвЂўР РЋРІР‚С™Р РЋРІР‚в„–',
    description: 'Р В РЎвЂ™Р В Р вЂ Р РЋРІР‚С™Р В РЎвЂўР В РЎВР В Р’В°Р РЋРІР‚С™ Р РЋР С“ Р РЋРІР‚С™Р РЋР вЂљР В Р’ВµР В РЎВР РЋР РЏ Р В Р’В±Р В Р’В°Р РЋР вЂљР В Р’В°Р В Р’В±Р В Р’В°Р В Р вЂ¦Р В Р’В°Р В РЎВР В РЎвЂ Р В РЎвЂ Р РЋРІвЂљВ¬Р В Р’В°Р В Р вЂ¦Р РЋР С“Р В РЎвЂўР В РЎВ Р В Р вЂ¦Р В Р’В° Р В РўвЂР В Р’В¶Р В Р’ВµР В РЎвЂќР В РЎвЂ”Р В РЎвЂўР РЋРІР‚С™',
    type: 'slots',
    status: 'published',
    icon: 'РЎР‚РЎСџР вЂ№Р’В°',
    config: {
      reels: 3,
      symbols: [
        { id: 'cherry', label: 'Р В РІР‚в„ўР В РЎвЂР РЋРІвЂљВ¬Р В Р вЂ¦Р РЋР РЏ', icon: 'РЎР‚РЎСџР РЉРІР‚в„ў', rarity: 1 },
        { id: 'lemon', label: 'Р В РІР‚С”Р В РЎвЂР В РЎВР В РЎвЂўР В Р вЂ¦', icon: 'РЎР‚РЎСџР РЉРІР‚в„–', rarity: 1 },
        { id: 'grape', label: 'Р В РІР‚в„ўР В РЎвЂР В Р вЂ¦Р В РЎвЂўР В РЎвЂ“Р РЋР вЂљР В Р’В°Р В РўвЂ', icon: 'РЎР‚РЎСџР РЉРІР‚РЋ', rarity: 2 },
        { id: 'bell', label: 'Р В РЎв„ўР В РЎвЂўР В Р’В»Р В РЎвЂўР В РЎвЂќР В РЎвЂўР В Р’В»', icon: 'РЎР‚РЎСџРІР‚СњРІР‚Сњ', rarity: 3 },
        { id: 'star', label: 'Р В РІР‚вЂќР В Р вЂ Р В Р’ВµР В Р’В·Р В РўвЂР В Р’В°', icon: 'Р Р†Р’В­РЎвЂ™', rarity: 5 }
      ],
      combinations: [
        { pattern: ['cherry', 'cherry', 'cherry'], multiplier: 10, description: 'Р В РЎС›Р РЋР вЂљР В РЎвЂ Р В Р вЂ Р В РЎвЂР РЋРІвЂљВ¬Р В Р вЂ¦Р В РЎвЂ' },
        { pattern: ['star', 'star', 'star'], multiplier: 100, description: 'Р В РЎС›Р РЋР вЂљР В РЎвЂ Р В Р’В·Р В Р вЂ Р В Р’ВµР В Р’В·Р В РўвЂР РЋРІР‚в„–' }
      ],
      spinDurationMs: 2000
    },
    rewards: [],
    access: {
      visibility: 'public',
      cooldownSeconds: 600
    },
    createdAt: '2024-01-03T00:00:00Z',
    updatedAt: '2024-01-03T00:00:00Z',
    publishedAt: '2024-01-03T00:00:00Z',
    stats: {
      totalPlays: 1567,
      totalRewards: 78900,
      uniquePlayers: 456
    }
  }
];

export function GamesPage({ onNavigate, currentPage, onOpenSettings, profilePhoto }: GamesPageProps) {
  const [selectedGame, setSelectedGame] = useState<Game | null>(null);
  const [isGameModalOpen, setIsGameModalOpen] = useState(false);
  const [userCooldowns, setUserCooldowns] = useState<Record<string, number>>({});

  const gameTypeIcons = {
    wheel: CircleDot,
    rps: Scissors,
    slots: DollarSign
  };

  const gameTypeNames = {
    wheel: 'Р В РЎв„ўР В РЎвЂўР В Р’В»Р В Р’ВµР РЋР С“Р В РЎвЂў Р РЋРІР‚С›Р В РЎвЂўР РЋР вЂљР РЋРІР‚С™Р РЋРЎвЂњР В Р вЂ¦Р РЋРІР‚в„–',
    rps: 'Р В РЎв„ўР В Р’В°Р В РЎВР В Р’ВµР В Р вЂ¦Р РЋР Р‰-Р В Р вЂ¦Р В РЎвЂўР В Р’В¶Р В Р вЂ¦Р В РЎвЂР РЋРІР‚В Р РЋРІР‚в„–-Р В Р’В±Р РЋРЎвЂњР В РЎВР В Р’В°Р В РЎвЂ“Р В Р’В°',
    slots: 'Р В Р Р‹Р В Р’В»Р В РЎвЂўР РЋРІР‚С™Р РЋРІР‚в„–'
  };

  const formatCooldown = (seconds: number) => {
    if (seconds < 60) return `${seconds}Р РЋР С“`;
    if (seconds < 3600) return `${Math.floor(seconds / 60)}Р В РЎВ`;
    return `${Math.floor(seconds / 3600)}Р РЋРІР‚РЋ`;
  };

  const formatStats = (num: number) => {
    if (num < 1000) return num.toString();
    if (num < 1000000) return `${(num / 1000).toFixed(1)}k`;
    return `${(num / 1000000).toFixed(1)}M`;
  };

  const canPlayGame = (gameId: string) => {
    const cooldownEndTime = userCooldowns[gameId];
    if (!cooldownEndTime) return true;
    return Date.now() > cooldownEndTime;
  };

  const getRemainingCooldown = (gameId: string) => {
    const cooldownEndTime = userCooldowns[gameId];
    if (!cooldownEndTime) return 0;
    return Math.max(0, Math.ceil((cooldownEndTime - Date.now()) / 1000));
  };

  const playGame = (game: Game) => {
    // Р В Р в‚¬Р РЋР С“Р РЋРІР‚С™Р В Р’В°Р В Р вЂ¦Р В Р’В°Р В Р вЂ Р В Р’В»Р В РЎвЂР В Р вЂ Р В Р’В°Р В Р’ВµР В РЎВ Р В РЎвЂќР РЋРЎвЂњР В Р’В»Р В РўвЂР В Р’В°Р РЋРЎвЂњР В Р вЂ¦
    const cooldownEndTime = Date.now() + (game.access.cooldownSeconds * 1000);
    setUserCooldowns(prev => ({
      ...prev,
      [game.id]: cooldownEndTime
    }));

    // Р В РІР‚вЂќР В РўвЂР В Р’ВµР РЋР С“Р РЋР Р‰ Р В Р’В±Р РЋРЎвЂњР В РўвЂР В Р’ВµР РЋРІР‚С™ Р В Р’В»Р В РЎвЂўР В РЎвЂ“Р В РЎвЂР В РЎвЂќР В Р’В° Р В Р’В·Р В Р’В°Р В РЎвЂ”Р РЋРЎвЂњР РЋР С“Р В РЎвЂќР В Р’В° Р В РЎвЂР В РЎвЂ“Р РЋР вЂљР РЋРІР‚в„–
    setSelectedGame(game);
    setIsGameModalOpen(true);
  };

  const renderGameInterface = (game: Game) => {
    switch (game.type) {
      case 'wheel':
        return (
          <div className="text-center py-8">
            <div className="w-32 h-32 bg-gradient-to-br from-primary to-purple-600 rounded-full mx-auto mb-6 flex items-center justify-center">
              <span className="text-4xl">РЎР‚РЎСџР вЂ№Р’В°</span>
            </div>
            <button className="w-full bg-primary text-primary-foreground py-3 rounded-xl hover:scale-[0.98] transition-transform mb-4">
              Р В РЎв„ўР РЋР вЂљР РЋРЎвЂњР РЋРІР‚С™Р В РЎвЂР РЋРІР‚С™Р РЋР Р‰ Р В РЎвЂќР В РЎвЂўР В Р’В»Р В Р’ВµР РЋР С“Р В РЎвЂў
            </button>
            <div className="text-sm text-muted-foreground">
              Р В РЎСљР В Р’В°Р В Р’В¶Р В РЎВР В РЎвЂР РЋРІР‚С™Р В Р’Вµ Р В РЎвЂќР В Р вЂ¦Р В РЎвЂўР В РЎвЂ”Р В РЎвЂќР РЋРЎвЂњ, Р РЋРІР‚РЋР РЋРІР‚С™Р В РЎвЂўР В Р’В±Р РЋРІР‚в„– Р В Р’В·Р В Р’В°Р В РЎвЂ”Р РЋРЎвЂњР РЋР С“Р РЋРІР‚С™Р В РЎвЂР РЋРІР‚С™Р РЋР Р‰ Р В РЎвЂќР В РЎвЂўР В Р’В»Р В Р’ВµР РЋР С“Р В РЎвЂў Р РЋРІР‚С›Р В РЎвЂўР РЋР вЂљР РЋРІР‚С™Р РЋРЎвЂњР В Р вЂ¦Р РЋРІР‚в„–
            </div>
          </div>
        );
      
      case 'rps':
        return (
          <div className="text-center py-8">
            <div className="grid grid-cols-3 gap-4 mb-6">
              {['РЎР‚РЎСџРІР‚вЂќРЎвЂ”', 'РЎР‚РЎСџРІР‚СљРІР‚С›', 'Р Р†РЎС™РІР‚С™Р С—РЎвЂР РЏ'].map((emoji, index) => (
                <button
                  key={index}
                  className="w-16 h-16 bg-secondary rounded-xl flex items-center justify-center text-2xl hover:scale-[0.95] transition-transform"
                >
                  {emoji}
                </button>
              ))}
            </div>
            <div className="text-sm text-muted-foreground">
              Р В РІР‚в„ўР РЋРІР‚в„–Р В Р’В±Р В Р’ВµР РЋР вЂљР В РЎвЂР РЋРІР‚С™Р В Р’Вµ Р В РЎвЂќР В Р’В°Р В РЎВР В Р’ВµР В Р вЂ¦Р РЋР Р‰, Р В Р’В±Р РЋРЎвЂњР В РЎВР В Р’В°Р В РЎвЂ“Р РЋРЎвЂњ Р В РЎвЂР В Р’В»Р В РЎвЂ Р В Р вЂ¦Р В РЎвЂўР В Р’В¶Р В Р вЂ¦Р В РЎвЂР РЋРІР‚В Р РЋРІР‚в„–
            </div>
          </div>
        );
      
      case 'slots':
        return (
          <div className="text-center py-8">
            <div className="flex justify-center gap-2 mb-6">
              {[0, 1, 2].map((i) => (
                <div key={i} className="w-16 h-20 bg-secondary rounded-xl flex items-center justify-center text-2xl">
                  РЎР‚РЎСџР РЉРІР‚в„ў
                </div>
              ))}
            </div>
            <button className="w-full bg-primary text-primary-foreground py-3 rounded-xl hover:scale-[0.98] transition-transform mb-4">
              Р В РЎв„ўР РЋР вЂљР РЋРЎвЂњР РЋРІР‚С™Р В РЎвЂР РЋРІР‚С™Р РЋР Р‰ Р В Р’В±Р В Р’В°Р РЋР вЂљР В Р’В°Р В Р’В±Р В Р’В°Р В Р вЂ¦Р РЋРІР‚в„–
            </button>
            <div className="text-sm text-muted-foreground">
              Р В РЎСљР В Р’В°Р В Р’В¶Р В РЎВР В РЎвЂР РЋРІР‚С™Р В Р’Вµ Р В РЎвЂќР В Р вЂ¦Р В РЎвЂўР В РЎвЂ”Р В РЎвЂќР РЋРЎвЂњ, Р РЋРІР‚РЋР РЋРІР‚С™Р В РЎвЂўР В Р’В±Р РЋРІР‚в„– Р В Р’В·Р В Р’В°Р В РЎвЂ”Р РЋРЎвЂњР РЋР С“Р РЋРІР‚С™Р В РЎвЂР РЋРІР‚С™Р РЋР Р‰ Р РЋР С“Р В Р’В»Р В РЎвЂўР РЋРІР‚С™Р РЋРІР‚в„–
            </div>
          </div>
        );
      
      default:
        return <div>Р В Р’ВР В РЎвЂ“Р РЋР вЂљР В Р’В° Р В Р вЂ¦Р В Р’Вµ Р В РЎвЂ”Р В РЎвЂўР В РўвЂР В РўвЂР В Р’ВµР РЋР вЂљР В Р’В¶Р В РЎвЂР В Р вЂ Р В Р’В°Р В Р’ВµР РЋРІР‚С™Р РЋР С“Р РЋР РЏ</div>;
    }
  };

  return (
    <div className="min-h-screen bg-background">
      <Header 
        title="Р В Р’ВР В РЎвЂ“Р РЋР вЂљР РЋРІР‚в„–" 
        onOpenSettings={onOpenSettings} 
        profilePhoto={profilePhoto}
      />
      
      <div className="pt-20 pb-20 p-6">
        {/* Р В РІР‚вЂќР В Р’В°Р В РЎвЂ“Р В РЎвЂўР В Р’В»Р В РЎвЂўР В Р вЂ Р В РЎвЂўР В РЎвЂќ Р РЋР С“Р В Р’ВµР В РЎвЂќР РЋРІР‚В Р В РЎвЂР В РЎвЂ */}
        <div className="text-center mb-8">
          <h2 className="text-xl font-medium text-foreground mb-2">Р В РЎС™Р В РЎвЂР В Р вЂ¦Р В РЎвЂ-Р В РЎвЂР В РЎвЂ“Р РЋР вЂљР РЋРІР‚в„–</h2>
          <p className="text-sm text-muted-foreground">
            Р В Р’ВР В РЎвЂ“Р РЋР вЂљР В Р’В°Р В РІвЂћвЂ“Р РЋРІР‚С™Р В Р’Вµ Р В РЎвЂ Р В РЎвЂ”Р В РЎвЂўР В Р’В»Р РЋРЎвЂњР РЋРІР‚РЋР В Р’В°Р В РІвЂћвЂ“Р РЋРІР‚С™Р В Р’Вµ Р В Р вЂ¦Р В Р’В°Р В РЎвЂ“Р РЋР вЂљР В Р’В°Р В РўвЂР РЋРІР‚в„– Р В РЎвЂќР В Р’В°Р В Р’В¶Р В РўвЂР РЋРІР‚в„–Р В РІвЂћвЂ“ Р В РўвЂР В Р’ВµР В Р вЂ¦Р РЋР Р‰
          </p>
        </div>

        {/* Р В Р Р‹Р В РЎвЂ”Р В РЎвЂР РЋР С“Р В РЎвЂўР В РЎвЂќ Р В РЎвЂР В РЎвЂ“Р РЋР вЂљ */}
        <div className="space-y-4">
          {publishedGames.map((game) => {
            const GameIcon = gameTypeIcons[game.type] || Gamepad2;
            const canPlay = canPlayGame(game.id);
            const remainingCooldown = getRemainingCooldown(game.id);
            
            return (
              <div key={game.id} className="glass-card rounded-2xl p-4 apple-shadow">
                <div className="flex items-start gap-4">
                  {/* Р В Р’ВР В РЎвЂќР В РЎвЂўР В Р вЂ¦Р В РЎвЂќР В Р’В° Р В РЎвЂР В РЎвЂ“Р РЋР вЂљР РЋРІР‚в„– */}
                  <div className="w-12 h-12 glass-card rounded-xl flex items-center justify-center">
                    {game.icon ? (
                      <span className="text-2xl">{game.icon}</span>
                    ) : (
                      <GameIcon className="w-6 h-6 text-foreground/70" />
                    )}
                  </div>
                  
                  <div className="flex-1">
                    {/* Р В РІР‚вЂќР В Р’В°Р В РЎвЂ“Р В РЎвЂўР В Р’В»Р В РЎвЂўР В Р вЂ Р В РЎвЂўР В РЎвЂќ */}
                    <div className="flex items-start justify-between mb-2">
                      <div>
                        <div className="font-medium text-foreground">{game.name}</div>
                        <div className="text-sm text-muted-foreground">
                          {gameTypeNames[game.type]}
                        </div>
                      </div>
                      {!canPlay && (
                        <div className="flex items-center gap-1 bg-orange-100 text-orange-600 px-2 py-1 rounded-full text-xs">
                          <Clock className="w-3 h-3" />
                          {formatCooldown(remainingCooldown)}
                        </div>
                      )}
                    </div>
                    
                    {/* Р В РЎвЂєР В РЎвЂ”Р В РЎвЂР РЋР С“Р В Р’В°Р В Р вЂ¦Р В РЎвЂР В Р’Вµ */}
                    <div className="text-sm text-muted-foreground mb-3">
                      {game.description}
                    </div>
                    
                    {/* Р В Р Р‹Р РЋРІР‚С™Р В Р’В°Р РЋРІР‚С™Р В РЎвЂР РЋР С“Р РЋРІР‚С™Р В РЎвЂР В РЎвЂќР В Р’В° */}
                    <div className="grid grid-cols-3 gap-4 text-xs mb-4">
                      <div className="text-center">
                        <div className="text-foreground font-medium">{formatStats(game.stats?.totalPlays || 0)}</div>
                        <div className="text-muted-foreground">Р В Р’ВР В РЎвЂ“Р РЋР вЂљ</div>
                      </div>
                      <div className="text-center">
                        <div className="text-foreground font-medium">{formatStats(game.stats?.totalRewards || 0)}</div>
                        <div className="text-muted-foreground">Р В РЎСљР В Р’В°Р В РЎвЂ“Р РЋР вЂљР В Р’В°Р В РўвЂ</div>
                      </div>
                      <div className="text-center">
                        <div className="text-foreground font-medium">{formatStats(game.stats?.uniquePlayers || 0)}</div>
                        <div className="text-muted-foreground">Р В Р’ВР В РЎвЂ“Р РЋР вЂљР В РЎвЂўР В РЎвЂќР В РЎвЂўР В Р вЂ </div>
                      </div>
                    </div>
                    
                    {/* Р В Р’ВР В Р вЂ¦Р РЋРІР‚С›Р В РЎвЂўР РЋР вЂљР В РЎВР В Р’В°Р РЋРІР‚В Р В РЎвЂР РЋР РЏ Р В РЎвЂў Р В РЎвЂќР РЋРЎвЂњР В Р’В»Р В РўвЂР В Р’В°Р РЋРЎвЂњР В Р вЂ¦Р В Р’Вµ */}
                    <div className="flex items-center justify-between text-xs text-muted-foreground mb-4">
                      <div className="flex items-center gap-1">
                        <Clock className="w-3 h-3" />
                        Р В РЎв„ўР РЋРЎвЂњР В Р’В»Р В РўвЂР В Р’В°Р РЋРЎвЂњР В Р вЂ¦: {formatCooldown(game.access.cooldownSeconds)}
                      </div>
                      <div className="flex items-center gap-1">
                        <Users className="w-3 h-3" />
                        Р В РЎСџР РЋРЎвЂњР В Р’В±Р В Р’В»Р В РЎвЂР РЋРІР‚РЋР В Р вЂ¦Р В Р’В°Р РЋР РЏ Р В РЎвЂР В РЎвЂ“Р РЋР вЂљР В Р’В°
                      </div>
                    </div>
                    
                    {/* Р В РЎв„ўР В Р вЂ¦Р В РЎвЂўР В РЎвЂ”Р В РЎвЂќР В Р’В° Р В РЎвЂР В РЎвЂ“Р РЋР вЂљР РЋРІР‚в„– */}
                    <button
                      onClick={() => playGame(game)}
                      disabled={!canPlay}
                      className={`w-full py-3 rounded-xl transition-transform ${
                        canPlay
                          ? 'bg-primary text-primary-foreground hover:scale-[0.98]'
                          : 'bg-secondary text-muted-foreground cursor-not-allowed'
                      }`}
                    >
                      <div className="flex items-center justify-center gap-2">
                        <Play className="w-4 h-4" />
                        {canPlay ? 'Р В Р’ВР В РЎвЂ“Р РЋР вЂљР В Р’В°Р РЋРІР‚С™Р РЋР Р‰' : `Р В РІР‚вЂњР В РўвЂР В РЎвЂР РЋРІР‚С™Р В Р’Вµ ${formatCooldown(remainingCooldown)}`}
                      </div>
                    </button>
                  </div>
                </div>
              </div>
            );
          })}
        </div>

        {/* Р В РЎСџР РЋРЎвЂњР РЋР С“Р РЋРІР‚С™Р В РЎвЂўР В Р’Вµ Р РЋР С“Р В РЎвЂўР РЋР С“Р РЋРІР‚С™Р В РЎвЂўР РЋР РЏР В Р вЂ¦Р В РЎвЂР В Р’Вµ */}
        {publishedGames.length === 0 && (
          <div className="glass-card rounded-2xl p-8 text-center apple-shadow">
            <Gamepad2 className="w-12 h-12 text-muted-foreground mx-auto mb-4" />
            <h3 className="text-lg font-medium text-foreground mb-2">Р В Р’ВР В РЎвЂ“Р РЋР вЂљР РЋРІР‚в„– Р РЋР С“Р В РЎвЂќР В РЎвЂўР РЋР вЂљР В РЎвЂў Р В РЎвЂ”Р В РЎвЂўР РЋР РЏР В Р вЂ Р РЋР РЏР РЋРІР‚С™Р РЋР С“Р РЋР РЏ</h3>
            <p className="text-sm text-muted-foreground">
              Р В РЎвЂ™Р В РўвЂР В РЎВР В РЎвЂР В Р вЂ¦Р В РЎвЂР РЋР С“Р РЋРІР‚С™Р РЋР вЂљР В Р’В°Р РЋРІР‚С™Р В РЎвЂўР РЋР вЂљР РЋРІР‚в„– Р РЋР вЂљР В Р’В°Р В Р’В±Р В РЎвЂўР РЋРІР‚С™Р В Р’В°Р РЋР вЂ№Р РЋРІР‚С™ Р В Р вЂ¦Р В Р’В°Р В РўвЂ Р В РўвЂР В РЎвЂўР В Р’В±Р В Р’В°Р В Р вЂ Р В Р’В»Р В Р’ВµР В Р вЂ¦Р В РЎвЂР В Р’ВµР В РЎВ Р В Р вЂ¦Р В РЎвЂўР В Р вЂ Р РЋРІР‚в„–Р РЋРІР‚В¦ Р В РЎВР В РЎвЂР В Р вЂ¦Р В РЎвЂ-Р В РЎвЂР В РЎвЂ“Р РЋР вЂљ
            </p>
          </div>
        )}
      </div>

      {/* Р В РЎС™Р В РЎвЂўР В РўвЂР В Р’В°Р В Р’В»Р РЋР Р‰Р В Р вЂ¦Р В РЎвЂўР В Р’Вµ Р В РЎвЂўР В РЎвЂќР В Р вЂ¦Р В РЎвЂў Р В РЎвЂР В РЎвЂ“Р РЋР вЂљР РЋРІР‚в„– */}
      <Dialog open={isGameModalOpen} onOpenChange={setIsGameModalOpen}>
        <DialogContent className="glass-card rounded-3xl border-2 border-border apple-shadow w-[90vw] max-w-md p-0 [&>button]:hidden">
          <div className="p-6">
            {selectedGame && (
              <>
                <div className="flex items-center justify-between mb-6">
                  <div>
                    <DialogTitle className="text-lg font-medium text-foreground">
                      {selectedGame.name}
                    </DialogTitle>
                    <p className="text-sm text-muted-foreground">
                      {gameTypeNames[selectedGame.type]}
                    </p>
                  </div>
                  <button
                    onClick={() => setIsGameModalOpen(false)}
                    className="p-2 hover:bg-black/5 rounded-lg transition-colors"
                  >
                    Р Р†РЎС™РІР‚Сћ
                  </button>
                </div>
                
                <DialogDescription className="sr-only">
                  Р В Р’ВР В Р вЂ¦Р РЋРІР‚С™Р В Р’ВµР РЋР вЂљР РЋРІР‚С›Р В Р’ВµР В РІвЂћвЂ“Р РЋР С“ Р В РЎВР В РЎвЂР В Р вЂ¦Р В РЎвЂ-Р В РЎвЂР В РЎвЂ“Р РЋР вЂљР РЋРІР‚в„– {selectedGame.name}
                </DialogDescription>

                {/* Р В Р’ВР В Р вЂ¦Р РЋРІР‚С™Р В Р’ВµР РЋР вЂљР РЋРІР‚С›Р В Р’ВµР В РІвЂћвЂ“Р РЋР С“ Р В РЎвЂР В РЎвЂ“Р РЋР вЂљР РЋРІР‚в„– */}
                {renderGameInterface(selectedGame)}
              </>
            )}
          </div>
        </DialogContent>
      </Dialog>

      <BottomNavigation currentPage={currentPage} onNavigate={onNavigate} />
    </div>
  );
}
